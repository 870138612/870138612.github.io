import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,d as e,o as t}from"./app-DKf_QkHx.js";const n={};function l(h,i){return t(),a("div",null,i[0]||(i[0]=[e(`<h2 id="nova-rootwrap" tabindex="-1"><a class="header-anchor" href="#nova-rootwrap"><span>nova-rootwrap</span></a></h2><h3 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h3><p>为了使用<code>root_wrap</code>以将普通用户的指令修改为<code>sudo</code>运行的指令，且不需要输入密码，则首先需要在<code>/etc/sudoers</code>中配置对应的配置项，例如允许<code>ms</code>用户运行<code>nova-rootwrap</code></p><div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" data-title="ini" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">nova </span><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">ALL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> (root) NOPASSWD: /usr/bin/nova-rootwarp /etc/nova/rootwarp.conf*</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="rootwrap配置" tabindex="-1"><a class="header-anchor" href="#rootwrap配置"><span>Rootwrap配置</span></a></h3><p><code>nova-rootwrap</code>的运行依赖于配置文件<code>rootwrap.conf</code>，文件需要具有<code>root</code>用户的写入和拥有权限，其参数包含以下：</p><h4 id="deafault-配置" tabindex="-1"><a class="header-anchor" href="#deafault-配置"><span>[DEAFAULT]配置</span></a></h4><p><strong>filters_path</strong></p><p>包含所有定义的过滤器，使用逗号分隔</p><div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" data-title="ini" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">filters_path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">/etc/nova/rootwrap.d,/usr/share/nova/rootwrap</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>exec_dirs</strong></p><p>以逗号分隔的目录列表，表示可以被匹配的执行文件，以防过滤器中没有明确指定完整路径；如果没有指定，则默认是系统的环境变量；同样需要<code>root</code>拥有</p><div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" data-title="ini" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">exec_dirs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">/sbin,/usr/sbin,/bin,/usr/bin</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>use_syslog</strong></p><p>启用记录到 syslog</p><div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" data-title="ini" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">use_syslog</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">True</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>syslog_log_facility</strong></p><p>使用哪个 syslog 工具进行 syslog 日志记录</p><div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" data-title="ini" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">syslog_log_facility</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">syslog</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>syslog_log_level</strong></p><p>日志级别</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>syslog_log_level=ERROR</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="filters-部分" tabindex="-1"><a class="header-anchor" href="#filters-部分"><span>[Filters] 部分</span></a></h4><p><strong>filter_name（每个过滤器不同名称）</strong></p><p>每行过滤器配置中需要指定使用的<code>Filter</code>类，还有其他参数，根据不同类的过滤器，所指定的参数有所不同</p><h3 id="可用的过滤器类" tabindex="-1"><a class="header-anchor" href="#可用的过滤器类"><span>可用的过滤器类</span></a></h3><h3 id="commandfilter" tabindex="-1"><a class="header-anchor" href="#commandfilter"><span>CommandFilter</span></a></h3><p>仅检查调用的可执行文件的基本过滤器。参数包括：</p><ol><li>允许执行的命令</li><li>以什么用户执行</li></ol><p>示例：允许以<code>root</code>用户身份运行<code>kpartx</code>，并使用任意参数：</p><div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" data-title="ini" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">kpartx: CommandFilter, kpartx, root</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="regexpfilter" tabindex="-1"><a class="header-anchor" href="#regexpfilter"><span>RegExpFilter</span></a></h3><p>通用过滤器，检查调用的可执行文件，然后使用正则表达式列表检查所有后续参数。参数包括：</p><ol><li>允许执行的命令</li><li>以什么用户执行</li><li>用于匹配第一个（及后续）命令参数的正则表达式</li></ol><p>示例：允许运行<code>/usr/sbin/tunctl</code>，但只能使用三个参数，其中前两个参数为<code>-b</code>和<code>-t</code>：</p><div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" data-title="ini" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">tunctl: RegExpFilter, /usr/sbin/tunctl, root, tunctl, -b, -t, .*</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="pathfilter" tabindex="-1"><a class="header-anchor" href="#pathfilter"><span>PathFilter</span></a></h3><p>通用过滤器，可让您检查作为参数提供的路径是否属于给定目录。参数包括：</p><ol><li>允许执行的命令</li><li>以什么用户执行</li><li>命令参数（及后续）</li></ol><p>命令参数有三种类型：<code>pass</code>将接受任何参数值，字符串将只接受相应的字符串作为参数，除非字符串以<code>/</code>开头，在这种情况下它将接受在相应目录下解析的任何路径。</p><p>示例：允许将<code>/var/lib/images</code>下的任何文件的所有权转让给<code>nova</code>用户</p><div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" data-title="ini" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">chown: PathFilter, /bin/chown, root, nova, /var/lib/images</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="从openstack视角调用rootwrap" tabindex="-1"><a class="header-anchor" href="#从openstack视角调用rootwrap"><span>从Openstack视角调用rootwrap</span></a></h3><h4 id="独立模式-sudo方式" tabindex="-1"><a class="header-anchor" href="#独立模式-sudo方式"><span>独立模式（sudo方式）</span></a></h4><p><code>oslo.processutils</code>库附带一个便捷<code>execute()</code>函数，可用于调用<code>shell</code>命令(<code>root</code>用户执行)</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> oslo_concurrency.processutils </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> execute</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> changeHugePage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;">num</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    filename </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;node</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">{}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">format</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(num)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    cmd </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;echo a &gt; </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">{}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">format</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(filename)]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    execute1 </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> execute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">cmd</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">cmd,</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">shell</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">True</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">run_as_root</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">True</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">root_helper</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;sudo nova-rootwrap /etc/nova/rootwrap.conf&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="守护进程模式" tabindex="-1"><a class="header-anchor" href="#守护进程模式"><span>守护进程模式</span></a></h4><p><code>oslo.rootwrap</code>支持“守护进程模式”。在此模式下，<code>rootwrap</code>启动并读取配置文件并等待命令以<code>root</code>权限运行</p><p>与守护进程的所有通信都应该通过位于<code>oslo_rootwrap.client</code>模块中的<code>Client</code>类进行</p><p>构造函数包含一个可以传递给<code>Popen</code>以创建<code>rootwrap</code>守护进程的列表</p><p>例如，对于上面的<code>root_helper</code>参数，这个参数是<code>[&quot;sudo&quot;, &quot;nova-rootwrap-deamon&quot;, &quot;/etc/neutron/rootwrap.conf&quot;]</code></p><p>执行方式</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> oslo_rootwrap.client </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Client</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> changeHugePage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;">huge_page_num</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;">numa_id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    filename </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;node</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">{}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">format</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(numa_id)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    cmd </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;echo </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">{}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &gt; </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">{}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">format</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(huge_page_num,filename)]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    client </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> Client</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">rootwrap_daemon_cmd</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;sudo&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;nova-rootwrap-deamon&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/etc/neutron/rootwrap.conf&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">])</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    client.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">execute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">cmd</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">cmd)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该类提供了一个带有以下参数的execute方法：</p><p><code>userargs</code>用于运行命令的命令行参数列表；</p><p><code>stdin</code>要传递给子进程的标准输入的字符串;</p><p>该方法返回包含以下内容的三元组：子进程返回码；包含从<code>stdout</code>流捕获的所有内容的字符串；包含从其<code>stderr</code>流中捕获的所有内容的字符串</p>`,57)]))}const p=s(n,[["render",l],["__file","oslo_rootwrap.html.vue"]]),d=JSON.parse('{"path":"/openstack/other/oslo_rootwrap.html","title":"oslo_rootwrap组件","lang":"zh-CN","frontmatter":{"title":"oslo_rootwrap组件","star":true,"icon":"page","category":["openstack","随记","oslo_rootwrap","oslo"],"tag":["oslo组件","root","提权操作","oslo_rootwrap"],"description":"nova-rootwrap 安装 为了使用root_wrap以将普通用户的指令修改为sudo运行的指令，且不需要输入密码，则首先需要在/etc/sudoers中配置对应的配置项，例如允许ms用户运行nova-rootwrap Rootwrap配置 nova-rootwrap的运行依赖于配置文件rootwrap.conf，文件需要具有root用户的写入和...","head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/openstack/other/oslo_rootwrap.html"}],["meta",{"property":"og:site_name","content":"Zzz"}],["meta",{"property":"og:title","content":"oslo_rootwrap组件"}],["meta",{"property":"og:description","content":"nova-rootwrap 安装 为了使用root_wrap以将普通用户的指令修改为sudo运行的指令，且不需要输入密码，则首先需要在/etc/sudoers中配置对应的配置项，例如允许ms用户运行nova-rootwrap Rootwrap配置 nova-rootwrap的运行依赖于配置文件rootwrap.conf，文件需要具有root用户的写入和..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-03-28T15:48:19.000Z"}],["meta",{"property":"article:tag","content":"oslo组件"}],["meta",{"property":"article:tag","content":"root"}],["meta",{"property":"article:tag","content":"提权操作"}],["meta",{"property":"article:tag","content":"oslo_rootwrap"}],["meta",{"property":"article:modified_time","content":"2025-03-28T15:48:19.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"oslo_rootwrap组件\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-03-28T15:48:19.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Zzz\\",\\"url\\":\\"https://ylzhong.top\\"}]}"]]},"headers":[{"level":2,"title":"nova-rootwrap","slug":"nova-rootwrap","link":"#nova-rootwrap","children":[{"level":3,"title":"安装","slug":"安装","link":"#安装","children":[]},{"level":3,"title":"Rootwrap配置","slug":"rootwrap配置","link":"#rootwrap配置","children":[]},{"level":3,"title":"可用的过滤器类","slug":"可用的过滤器类","link":"#可用的过滤器类","children":[]},{"level":3,"title":"CommandFilter","slug":"commandfilter","link":"#commandfilter","children":[]},{"level":3,"title":"RegExpFilter","slug":"regexpfilter","link":"#regexpfilter","children":[]},{"level":3,"title":"PathFilter","slug":"pathfilter","link":"#pathfilter","children":[]},{"level":3,"title":"从Openstack视角调用rootwrap","slug":"从openstack视角调用rootwrap","link":"#从openstack视角调用rootwrap","children":[]}]}],"git":{"createdTime":1743176574000,"updatedTime":1743176899000,"contributors":[{"name":"zyl","email":"870138612@qq.com","commits":5}]},"readingTime":{"minutes":3.24,"words":971},"filePathRelative":"openstack/other/oslo_rootwrap.md","localizedDate":"2025年3月28日","excerpt":"<h2>nova-rootwrap</h2>\\n<h3>安装</h3>\\n<p>为了使用<code>root_wrap</code>以将普通用户的指令修改为<code>sudo</code>运行的指令，且不需要输入密码，则首先需要在<code>/etc/sudoers</code>中配置对应的配置项，例如允许<code>ms</code>用户运行<code>nova-rootwrap</code></p>\\n<div class=\\"language-ini line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"ini\\" data-title=\\"ini\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#98C379\\">nova </span><span style=\\"--shiki-light:#E45649;--shiki-dark:#C678DD\\">ALL</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> =</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#98C379\\"> (root) NOPASSWD: /usr/bin/nova-rootwarp /etc/nova/rootwarp.conf*</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{p as comp,d as data};
